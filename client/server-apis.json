{
  "info": {
    "name": "M2",
    "description": "Complete API collection for MiniLend DeFi Platform",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Get Auth Challenge",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/challenge?address={{wallet_address}}",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "challenge"
              ],
              "query": [
                {
                  "key": "address",
                  "value": "{{wallet_address}}",
                  "description": "MiniPay wallet address"
                }
              ]
            }
          }
        },
        {
          "name": "Verify Auth",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"miniPayAddress\":\"{{wallet_address}}\",\"signature\":\"0x...\",\"message\":\"Sign this message to verify your MiniPay address: {nonce}\"}"
            },
            "url": {
              "raw": "{{base_url}}/auth/verify",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "verify"
              ]
            }
          }
        },
        {
          "name": "Get Auth Token",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"miniPayAddress\":\"{{wallet_address}}\"}"
            },
            "url": {
              "raw": "{{base_url}}/auth/token",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "auth",
                "token"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "User Management",
      "item": [
        {
          "name": "Get User Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/users/profile",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "users",
                "profile"
              ]
            }
          }
        },
        {
          "name": "Get User History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/users/history",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "users",
                "history"
              ]
            }
          }
        },
        {
          "name": "Get User Liquidity",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/users/liquidity",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "users",
                "liquidity"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Lending Pools",
      "item": [
        {
          "name": "Create Lending Pool",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"name\":\"Test Pool\",\"totalFunds\":10000,\"currency\":\"cUSD\",\"interestRate\":500,\"minLoanAmount\":100,\"maxLoanAmount\":1000,\"minTermDays\":30,\"maxTermDays\":180,\"riskLevel\":\"medium\",\"region\":\"Global\",\"description\":\"Test lending pool\",\"miniPayAddress\":\"{{wallet_address}}\"}"
            },
            "url": {
              "raw": "{{base_url}}/api/lending-pools",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lending-pools"
              ]
            }
          }
        },
        {
          "name": "Get Pool Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/lending-pools/status",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lending-pools",
                "status"
              ]
            }
          }
        },
        {
          "name": "Fund Pool",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"amount\":1000}"
            },
            "url": {
              "raw": "{{base_url}}/api/lending-pools/:poolId/fund",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lending-pools",
                ":poolId",
                "fund"
              ]
            }
          }
        },
        {
          "name": "Withdraw From Pool",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"amount\":500}"
            },
            "url": {
              "raw": "{{base_url}}/api/lending-pools/:poolId/withdraw",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "lending-pools",
                ":poolId",
                "withdraw"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Loans",
      "item": [
        {
          "name": "Apply for Loan",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"amountCUSD\":1000,\"amountLocal\":1200,\"localCurrency\":\"USD\",\"termDays\":30,\"miniPayAddress\":\"{{wallet_address}}\"}"
            },
            "url": {
              "raw": "{{base_url}}/api/loans/apply",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "loans",
                "apply"
              ]
            }
          }
        },
        {
          "name": "Get Loan Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/loans/:loanId",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "loans",
                ":loanId"
              ]
            }
          }
        },
        {
          "name": "Get Active Loans",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/loans/active",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "loans",
                "active"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Repayments",
      "item": [
        {
          "name": "Get Repayment Schedule",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/repayment/schedule/:loanId",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "repayment",
                "schedule",
                ":loanId"
              ]
            }
          }
        },
        {
          "name": "Make Repayment",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"loanId\":\"loan_id_here\",\"amount\":100,\"miniPayAddress\":\"{{wallet_address}}\"}"
            },
            "url": {
              "raw": "{{base_url}}/api/repayment/process",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "repayment",
                "process"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Credit",
      "item": [
        {
          "name": "Get Credit Score",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/credit/score",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "credit",
                "score"
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Transactions",
      "item": [
        {
          "name": "Get Transaction History",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transactions/history",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "transactions",
                "history"
              ]
            }
          }
        },
        {
          "name": "Get Transaction Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/transactions/summary",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "transactions",
                "summary"
              ]
            }
          }
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:5001"
    },
    {
      "key": "wallet_address",
      "value": "your_wallet_address_here"
    },
    {
      "key": "jwt_token",
      "value": "your_jwt_token_here"
    }
  ]
}
